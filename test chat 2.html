import contextlib
import io
import webbrowser

def run(code, inputs):
    output = ""
    try:
        with contextlib.redirect_stdout(io.StringIO()) as f:
            exec(code, {'input': lambda: inputs.pop(0)})
        output = f.getvalue().strip()
    except Exception as e:
        return f"Error: {e}"
    return output

def check_A01(code):
    testcases = [
        {
            "inputs": ["1"],
            "expected": ["‡πÄ‡∏•‡∏Ç‡∏Ñ‡∏µ‡πà"]
        },
        {
            "inputs": ["2"],
            "expected": ["‡πÄ‡∏•‡∏Ç‡∏Ñ‡∏π‡πà"]
        }
    ]

    results_html = ""
    all_passed = True

    for i, case in enumerate(testcases, 1):
        output = run(code, case["inputs"].copy()).split("\n")
        expected = case["expected"]
        passed = output == expected
        all_passed = all_passed and passed

        results_html += f"""
        <tr>
            <td>{i}</td>
            <td>{case["inputs"]}</td>
            <td>{expected}</td>
            <td>{output}</td>
            <td style="color: {'green' if passed else 'red'};">{"‡∏ú‡πà‡∏≤‡∏ô" if passed else "‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô"}</td>
        </tr>
        """

    summary = "‡∏ú‡πà‡∏≤‡∏ô" if all_passed else "‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô"
    return all_passed, results_html, summary

# -----------------------------------
# üîΩ ‡πÇ‡∏Ñ‡πâ‡∏î‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à
student_code = """
n = int(input())
if n % 2 == 0:
    print("‡πÄ‡∏•‡∏Ç‡∏Ñ‡∏π‡πà")
else:
    print("‡πÄ‡∏•‡∏Ç‡∏Ñ‡∏µ‡πà")
"""
# -----------------------------------

# ‡∏ï‡∏£‡∏ß‡∏à‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á HTML ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô
passed, results_html, summary = check_A01(student_code)

html_content = f"""
<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <title>‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡πÇ‡∏Ñ‡πâ‡∏î</title>
    <style>
        body {{
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f4f4f4;
        }}
        table {{
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }}
        th, td {{
            border: 1px solid #ccc;
            padding: 8px;
            text-align: center;
        }}
        th {{
            background: #ddd;
        }}
        .summary {{
            font-size: 1.2em;
            font-weight: bold;
            color: { 'green' if passed else 'red' };
            margin-top: 20px;
        }}
    </style>
</head>
<body>
    <h1>‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡πÇ‡∏Ñ‡πâ‡∏î: A01</h1>
    <div class="summary">‡∏ú‡∏•‡∏£‡∏ß‡∏°: {summary}</div>
    <table>
        <thead>
            <tr>
                <th>‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏î‡∏™‡∏≠‡∏ö</th>
                <th>Input</th>
                <th>Expected Output</th>
                <th>Student Output</th>
                <th>‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå</th>
            </tr>
        </thead>
        <tbody>
            {results_html}
        </tbody>
    </table>
</body>
</html>
"""

# ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å HTML ‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ô‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå
with open("report.html", "w", encoding="utf-8") as f:
    f.write(html_content)

webbrowser.open("report.html")
